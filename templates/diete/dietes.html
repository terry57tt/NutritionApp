{% extends 'base.html' %}

{% block content %}
{% set page = 'dietes' %}

{% set place = ["accueil","dietes"] %}
{% with breadcrumb=place %}
    {% include "navbar.html" %}
{% endwith %}

<link rel="stylesheet" href="{{ url_for('static', filename='css/pages.css') }}">
<div class="content">
    <h1 class="title">{% block title %} Diètes {% endblock %}</h1>
    <div class="create_diet">
        <form action="{{ url_for('controllers.ajouter_diete') }}" method="POST" class="form-inline justify-content-center">
            <input type="text" id="titre" name="titre" class="form-control" placeholder="Créer une diète" required>
            <button type="submit" class="btn btn-primary">Valider</button>
        </form>
    </div>
    <div>
        <table class="table table-striped table-bordered">
            <tr class="text-center">
                <th>Titre</th>
                <th>Créateur</th>
                <th>Date</th>
                <th>Actions</th>
            </tr>
            {% for diete in dietes %}
            <tr>
                <td>{{ diete.titre_diete }}</td>
                <td>{{ diete.createur_obj.nom }}</td>
                <td>{{ diete.date }}</td>

                <td>
                    <div class="btn-group" role="group" aria-label="Basic example">
                        <a href="{{ url_for('controllers.voir_diete', id=diete.id) }}" class="btn btn-secondary">Voir</a>
                        <a href="{{ url_for('controllers.modifier_diete', id=diete.id) }}" class="btn btn-secondary">Modifier</a>
                        <a href="{{ url_for('controllers.supprimer_diete', id=diete.id) }}" class="btn btn-secondary">Supprimer</a>
                        <a href="{{ url_for('controllers.print_diete_pdf',id_diete=diete.id) }}" class="btn btn-secondary">PDF</a>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </table>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-md-8 offset-md-3">
                <form method="post" action="{{ url_for('controllers.importer_csv') }}" enctype="multipart/form-data">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <input class="form-control" type="file" id="fichier_csv" name="fichier_csv" onchange="checkFileSelected()">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <button type="submit" class="btn btn-primary" id="bouton_importer" disabled>Importer</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<script src="{{ url_for('static', filename='js/dietes.js') }}"></script>
{% endblock %}